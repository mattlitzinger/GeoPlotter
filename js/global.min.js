!function(a){a(function(){function b(b){"text/csv"==b.type?b.size<=26214400?(a(".app-alert-bar").hide(),c(b).then(function(a){g=a,d(Object.keys(a[0]))}).catch(function(){e("There was an issue loading the file.")})):e("Sorry, files must be less than 25MB."):e("Sorry, only CSV files are allowed.")}function c(a){var b=new FileReader,c=[];return new Promise(function(d,e){b.onload=function(){var a=this.result.split("\n"),b=a.map(function(a){return a.split(",")}),e=[];for(i=0;i<b.length;i++)""!=b[i]&&(e[i]=b[i]);b=e;var f=b[0];for(i=1;i<b.length;i++){var g=b[i],h={};for(j=0;j<g.length;j++)h[f[j].trim()]=g[j].trim();c.push(h)}d(c)},b.onerror=function(){return e(this)},b.readAsText(a)})}function d(b){clearMarkers();var c='<option value="" selected>--</option>';for(i=0;i<b.length;i++)c=c+'<option value="'+escape(b[i])+'">'+b[i]+"</option>";a("#zip_code_filter").html(c),a("#filter_options").show()}function e(b){a(".app-alert-bar").show(),a(".app-alert-bar-inner").text(b)}function f(a){for(var b=[],c=a,d=g.length-1;d>=0;d--)b.push(g[d][c]);addMarkers(b)}var g=[];if(a("#upload_file").on("change",function(){b(this.files[0])}),a("#zip_code_filter").on("change",function(){f(unescape(a(this).val()))}),function(){var a=document.createElement("div");return("draggable"in a||"ondragstart"in a&&"ondrop"in a)&&"FormData"in window&&"FileReader"in window}()){var h=!1;a(".app-header").addClass("has-advanced-upload"),a(".app-header").on("drag dragstart dragend dragover dragenter dragleave drop",function(a){a.preventDefault(),a.stopPropagation()}).on("dragover dragenter",function(){a(".app-header").addClass("is-dragover")}).on("dragleave dragend drop",function(){a(".app-header").removeClass("is-dragover")}).on("drop",function(a){h=a.originalEvent.dataTransfer.files,b(h[0])})}})}(jQuery);